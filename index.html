<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comparador de Taxas - Stone</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f5f7fa;
        }
        .stone-green {
            background-color: #00AB80;
        }
        .stone-green-text {
            color: #00AB80;
        }
        .stone-green-border {
            border-color: #00AB80;
        }
        .competitor-color {
            background-color: #6366F1;
        }
        .competitor-color-text {
            color: #6366F1;
        }
        .competitor-border {
            border-color: #6366F1;
        }
        input:focus, select:focus {
            outline: none;
            border-color: #00AB80;
            box-shadow: 0 0 0 3px rgba(0, 171, 128, 0.2);
        }
        .result-card {
            transition: all 0.3s ease;
        }
        .result-card:hover {
            transform: translateY(-5px);
        }
        @media print {
            .no-print {
                display: none;
            }
            body {
                background-color: white;
            }
            .print-break-inside-avoid {
                break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="min-h-screen">
        <!-- Header -->
        <header class="stone-green text-white shadow-lg no-print">
            <div class="container mx-auto px-4 py-4">
                <div class="flex justify-between items-center">
                    <div class="flex items-center">
                        <!-- Stone Logo -->
                        <svg class="h-10 mr-3" viewBox="0 0 120 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20 0C8.954 0 0 8.954 0 20C0 31.046 8.954 40 20 40C31.046 40 40 31.046 40 20C40 8.954 31.046 0 20 0ZM20 30C14.477 30 10 25.523 10 20C10 14.477 14.477 10 20 10C25.523 10 30 14.477 30 20C30 25.523 25.523 30 20 30Z" fill="white"/>
                            <path d="M50 12.5V27.5H53.75V22.5H57.5C60.95 22.5 63.75 19.7 63.75 17.5C63.75 15.3 60.95 12.5 57.5 12.5H50ZM53.75 15H57.5C58.825 15 60 16.175 60 17.5C60 18.825 58.825 20 57.5 20H53.75V15Z" fill="white"/>
                            <path d="M67.5 12.5V27.5H71.25V22.5H73.125L76.875 27.5H81.25L76.875 21.875C78.75 21.25 80 19.5 80 17.5C80 15.3 77.2 12.5 73.75 12.5H67.5ZM71.25 15H73.75C75.075 15 76.25 16.175 76.25 17.5C76.25 18.825 75.075 20 73.75 20H71.25V15Z" fill="white"/>
                            <path d="M85 12.5V27.5H95V24.375H88.75V21.25H93.75V18.125H88.75V15.625H95V12.5H85Z" fill="white"/>
                        </svg>
                        <h1 class="text-2xl font-bold">Comparador de Taxas</h1>
                    </div>
                    <div class="text-sm md:text-base">
                        <span class="font-semibold">Agente Stone</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="container mx-auto px-4 py-8">
            <div class="bg-white rounded-lg shadow-lg p-6 mb-8 no-print">
                <h2 class="text-xl font-semibold mb-6">Distribuição de Vendas</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Valor Total de Vendas (R$)</label>
                        <input type="text" id="totalSales" class="w-full px-3 py-2 border rounded-md" placeholder="0,00" readonly>
                    </div>
                    
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Valores por Método (R$)</label>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-xs text-gray-500 mb-1">Débito</label>
                                <input type="text" id="debitValue" class="w-full px-3 py-2 border rounded-md money-input" placeholder="0,00">
                                <div class="text-xs text-gray-500 mt-1" id="debitPercentage">0%</div>
                            </div>
                            <div>
                                <label class="block text-xs text-gray-500 mb-1">Crédito à Vista</label>
                                <input type="text" id="creditValue" class="w-full px-3 py-2 border rounded-md money-input" placeholder="0,00">
                                <div class="text-xs text-gray-500 mt-1" id="creditPercentage">0%</div>
                            </div>
                            <div>
                                <label class="block text-xs text-gray-500 mb-1">Crédito Parcelado</label>
                                <div class="flex space-x-2">
                                    <div class="flex-grow">
                                        <input type="text" id="creditInstallmentValue" class="w-full px-3 py-2 border rounded-md money-input" placeholder="0,00">
                                    </div>
                                    <div class="w-16">
                                        <select id="installmentCount" class="w-full px-2 py-2 border rounded-md text-sm">
                                            <option value="2">2x</option>
                                            <option value="3">3x</option>
                                            <option value="4">4x</option>
                                            <option value="5">5x</option>
                                            <option value="6">6x</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="text-xs text-gray-500 mt-1" id="creditInstallmentPercentage">0%</div>
                            </div>
                            <div>
                                <label class="block text-xs text-gray-500 mb-1">Pix</label>
                                <input type="text" id="pixValue" class="w-full px-3 py-2 border rounded-md money-input" placeholder="0,00">
                                <div class="text-xs text-gray-500 mt-1" id="pixPercentage">0%</div>
                            </div>
                        </div>
                        <div class="mt-3 text-sm flex justify-between">
                            <span>Total: <span id="totalValueSum">R$ 0,00</span></span>
                            <span id="percentageTotal">0%</span>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Stone Column -->
                    <div class="border-2 stone-green-border rounded-lg p-6">
                        <div class="flex items-center mb-6">
                            <div class="w-12 h-12 stone-green rounded-full flex items-center justify-center mr-4">
                                <svg class="w-8 h-8 text-white" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M20 0C8.954 0 0 8.954 0 20C0 31.046 8.954 40 20 40C31.046 40 40 31.046 40 20C40 8.954 31.046 0 20 0ZM20 30C14.477 30 10 25.523 10 20C10 14.477 14.477 10 20 10C25.523 10 30 14.477 30 20C30 25.523 25.523 30 20 30Z" fill="currentColor"/>
                                </svg>
                            </div>
                            <h3 class="text-xl font-bold stone-green-text">Stone</h3>
                        </div>

                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Taxa de Débito (%)</label>
                                <input type="text" id="stoneDebitRate" class="w-full px-3 py-2 border rounded-md percentage-input" placeholder="0,00">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Taxa de Crédito à Vista (%)</label>
                                <input type="text" id="stoneCreditRate" class="w-full px-3 py-2 border rounded-md percentage-input" placeholder="0,00">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Taxa de Crédito Parcelado (%)</label>
                                <input type="text" id="stoneCreditInstallmentRate" class="w-full px-3 py-2 border rounded-md percentage-input" placeholder="0,00">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Taxa Pix (%)</label>
                                <input type="text" id="stonePixRate" class="w-full px-3 py-2 border rounded-md percentage-input" placeholder="0,00">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Cesta Bancária (R$)</label>
                                <input type="text" id="stoneBankFee" class="w-full px-3 py-2 border rounded-md money-input" placeholder="0,00">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Aluguel de Maquininha (R$)</label>
                                <input type="text" id="stoneRentalFee" class="w-full px-3 py-2 border rounded-md money-input" placeholder="0,00">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Taxa de Intermediação (%)</label>
                                <input type="text" id="stoneIntermediationFee" class="w-full px-3 py-2 border rounded-md percentage-input" placeholder="0,00">
                            </div>
                        </div>
                    </div>

                    <!-- Competitor Column -->
                    <div class="border-2 competitor-border rounded-lg p-6">
                        <div class="flex items-center mb-6">
                            <div class="w-12 h-12 competitor-color rounded-full flex items-center justify-center mr-4">
                                <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M18 5h-2.586l-3.707-3.707C11.52 1.105 11.266 1 11 1H9c-.266 0-.52.105-.707.293L4.586 5H2C.895 5 0 5.895 0 7v10c0 1.105.895 2 2 2h16c1.105 0 2-.895 2-2V7c0-1.105-.895-2-2-2zm-9 13c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5z"></path>
                                </svg>
                            </div>
                            <div class="flex-grow">
                                <h3 class="text-xl font-bold competitor-color-text">Concorrente</h3>
                                <input type="text" id="competitorName" class="w-full px-3 py-1 border rounded-md mt-1" placeholder="Nome da concorrente">
                            </div>
                        </div>

                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Taxa de Débito (%)</label>
                                <input type="text" id="competitorDebitRate" class="w-full px-3 py-2 border rounded-md percentage-input" placeholder="0,00">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Taxa de Crédito à Vista (%)</label>
                                <input type="text" id="competitorCreditRate" class="w-full px-3 py-2 border rounded-md percentage-input" placeholder="0,00">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Taxa de Crédito Parcelado (%)</label>
                                <input type="text" id="competitorCreditInstallmentRate" class="w-full px-3 py-2 border rounded-md percentage-input" placeholder="0,00">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Taxa Pix (%)</label>
                                <input type="text" id="competitorPixRate" class="w-full px-3 py-2 border rounded-md percentage-input" placeholder="0,00">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Cesta Bancária (R$)</label>
                                <input type="text" id="competitorBankFee" class="w-full px-3 py-2 border rounded-md money-input" placeholder="0,00">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Aluguel de Maquininha (R$)</label>
                                <input type="text" id="competitorRentalFee" class="w-full px-3 py-2 border rounded-md money-input" placeholder="0,00">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Taxa de Intermediação (%)</label>
                                <input type="text" id="competitorIntermediationFee" class="w-full px-3 py-2 border rounded-md percentage-input" placeholder="0,00">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-8 flex justify-center">
                    <button id="calculateButton" class="stone-green text-white font-bold py-3 px-8 rounded-full shadow-lg hover:opacity-90 transition-all flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                        </svg>
                        Calcular Comparativo
                    </button>
                </div>
            </div>

            <!-- Results Section -->
            <div id="resultsSection" class="hidden">
                <div class="print-header hidden print:block mb-8">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <svg class="h-10 mr-3" viewBox="0 0 120 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M20 0C8.954 0 0 8.954 0 20C0 31.046 8.954 40 20 40C31.046 40 40 31.046 40 20C40 8.954 31.046 0 20 0ZM20 30C14.477 30 10 25.523 10 20C10 14.477 14.477 10 20 10C25.523 10 30 14.477 30 20C30 25.523 25.523 30 20 30Z" fill="#00AB80"/>
                                <path d="M50 12.5V27.5H53.75V22.5H57.5C60.95 22.5 63.75 19.7 63.75 17.5C63.75 15.3 60.95 12.5 57.5 12.5H50ZM53.75 15H57.5C58.825 15 60 16.175 60 17.5C60 18.825 58.825 20 57.5 20H53.75V15Z" fill="#00AB80"/>
                                <path d="M67.5 12.5V27.5H71.25V22.5H73.125L76.875 27.5H81.25L76.875 21.875C78.75 21.25 80 19.5 80 17.5C80 15.3 77.2 12.5 73.75 12.5H67.5ZM71.25 15H73.75C75.075 15 76.25 16.175 76.25 17.5C76.25 18.825 75.075 20 73.75 20H71.25V15Z" fill="#00AB80"/>
                                <path d="M85 12.5V27.5H95V24.375H88.75V21.25H93.75V18.125H88.75V15.625H95V12.5H85Z" fill="#00AB80"/>
                            </svg>
                            <h1 class="text-2xl font-bold">Comparador de Taxas</h1>
                        </div>
                        <div class="text-sm">
                            <span class="font-semibold">Data: </span><span id="printDate"></span>
                        </div>
                    </div>
                    <div class="border-b border-gray-300 mt-4 mb-6"></div>
                    
                    <div class="mb-4">
                        <p><strong>Valor Total de Vendas:</strong> <span id="printTotalSales"></span></p>
                        <div class="grid grid-cols-4 gap-2 mt-2">
                            <div>
                                <span class="text-sm text-gray-600">Débito:</span>
                                <p id="printDebitValue" class="font-medium"></p>
                            </div>
                            <div>
                                <span class="text-sm text-gray-600">Crédito à Vista:</span>
                                <p id="printCreditValue" class="font-medium"></p>
                            </div>
                            <div>
                                <span class="text-sm text-gray-600">Crédito Parcelado:</span>
                                <p id="printCreditInstallmentValue" class="font-medium"></p>
                            </div>
                            <div>
                                <span class="text-sm text-gray-600">Pix:</span>
                                <p id="printPixValue" class="font-medium"></p>
                            </div>
                        </div>
                    </div>
                </div>

                <h2 class="text-2xl font-bold mb-6 text-center">Resultado do Comparativo</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <!-- Stone Results -->
                    <div class="result-card bg-white rounded-lg shadow-lg overflow-hidden print-break-inside-avoid">
                        <div class="stone-green p-4">
                            <h3 class="text-xl font-bold text-white text-center">Stone</h3>
                        </div>
                        <div class="p-6">
                            <div class="space-y-3">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Custo Débito:</span>
                                    <span class="font-semibold" id="stoneDebitCost">R$ 0,00</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Custo Crédito à Vista:</span>
                                    <span class="font-semibold" id="stoneCreditCost">R$ 0,00</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Custo Crédito Parcelado:</span>
                                    <span class="font-semibold" id="stoneCreditInstallmentCost">R$ 0,00</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Custo Pix:</span>
                                    <span class="font-semibold" id="stonePixCost">R$ 0,00</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Taxas Fixas:</span>
                                    <span class="font-semibold" id="stoneFixedFees">R$ 0,00</span>
                                </div>
                                <div class="border-t pt-3 mt-3">
                                    <div class="flex justify-between">
                                        <span class="text-gray-800 font-bold">Custo Total:</span>
                                        <span class="font-bold text-xl stone-green-text" id="stoneTotalCost">R$ 0,00</span>
                                    </div>
                                    <div class="flex justify-between mt-1">
                                        <span class="text-gray-600">Percentual sobre vendas:</span>
                                        <span class="font-semibold" id="stoneCostPercentage">0%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Comparison Results -->
                    <div class="result-card bg-white rounded-lg shadow-lg overflow-hidden print-break-inside-avoid">
                        <div class="bg-gradient-to-r from-indigo-500 to-purple-600 p-4">
                            <h3 class="text-xl font-bold text-white text-center">Comparativo</h3>
                        </div>
                        <div class="p-6 flex flex-col items-center justify-center h-full">
                            <div class="text-center mb-4">
                                <span class="text-gray-600 block">Economia Mensal</span>
                                <span class="font-bold text-3xl" id="monthlySavings">R$ 0,00</span>
                                <span class="text-sm text-gray-500 block mt-1" id="savingsPercentage">0% de economia</span>
                            </div>
                            
                            <div class="w-full bg-gray-100 rounded-full h-4 mt-4">
                                <div id="savingsBar" class="stone-green h-4 rounded-full" style="width: 0%"></div>
                            </div>
                            
                            <div class="mt-6 text-center">
                                <span class="text-gray-600 block">Economia Anual</span>
                                <span class="font-bold text-2xl" id="yearlySavings">R$ 0,00</span>
                            </div>
                        </div>
                    </div>

                    <!-- Competitor Results -->
                    <div class="result-card bg-white rounded-lg shadow-lg overflow-hidden print-break-inside-avoid">
                        <div class="competitor-color p-4">
                            <h3 class="text-xl font-bold text-white text-center" id="competitorNameDisplay">Concorrente</h3>
                        </div>
                        <div class="p-6">
                            <div class="space-y-3">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Custo Débito:</span>
                                    <span class="font-semibold" id="competitorDebitCost">R$ 0,00</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Custo Crédito à Vista:</span>
                                    <span class="font-semibold" id="competitorCreditCost">R$ 0,00</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Custo Crédito Parcelado:</span>
                                    <span class="font-semibold" id="competitorCreditInstallmentCost">R$ 0,00</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Custo Pix:</span>
                                    <span class="font-semibold" id="competitorPixCost">R$ 0,00</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Taxas Fixas:</span>
                                    <span class="font-semibold" id="competitorFixedFees">R$ 0,00</span>
                                </div>
                                <div class="border-t pt-3 mt-3">
                                    <div class="flex justify-between">
                                        <span class="text-gray-800 font-bold">Custo Total:</span>
                                        <span class="font-bold text-xl competitor-color-text" id="competitorTotalCost">R$ 0,00</span>
                                    </div>
                                    <div class="flex justify-between mt-1">
                                        <span class="text-gray-600">Percentual sobre vendas:</span>
                                        <span class="font-semibold" id="competitorCostPercentage">0%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-lg p-6 mb-8 print-break-inside-avoid">
                    <h3 class="text-xl font-semibold mb-4">Detalhamento dos Custos</h3>
                    
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead>
                                <tr>
                                    <th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Item</th>
                                    <th class="px-6 py-3 bg-gray-50 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Stone</th>
                                    <th class="px-6 py-3 bg-gray-50 text-right text-xs font-medium text-gray-500 uppercase tracking-wider" id="competitorTableHeader">Concorrente</th>
                                    <th class="px-6 py-3 bg-gray-50 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Diferença</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200" id="detailsTable">
                                <!-- Table rows will be inserted here by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="flex justify-center mt-8 no-print">
                    <button id="printButton" class="bg-gray-800 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-gray-700 transition-all flex items-center mr-4">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path>
                        </svg>
                        Imprimir Comparativo
                    </button>
                    
                    <button id="newComparisonButton" class="bg-gray-200 text-gray-800 font-bold py-3 px-8 rounded-full shadow-lg hover:bg-gray-300 transition-all flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                        </svg>
                        Novo Comparativo
                    </button>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="stone-green text-white py-6 mt-12 no-print">
            <div class="container mx-auto px-4 text-center">
                <div class="flex justify-center items-center mb-4">
                    <svg class="h-8 mr-2" viewBox="0 0 120 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M20 0C8.954 0 0 8.954 0 20C0 31.046 8.954 40 20 40C31.046 40 40 31.046 40 20C40 8.954 31.046 0 20 0ZM20 30C14.477 30 10 25.523 10 20C10 14.477 14.477 10 20 10C25.523 10 30 14.477 30 20C30 25.523 25.523 30 20 30Z" fill="white"/>
                        <path d="M50 12.5V27.5H53.75V22.5H57.5C60.95 22.5 63.75 19.7 63.75 17.5C63.75 15.3 60.95 12.5 57.5 12.5H50ZM53.75 15H57.5C58.825 15 60 16.175 60 17.5C60 18.825 58.825 20 57.5 20H53.75V15Z" fill="white"/>
                        <path d="M67.5 12.5V27.5H71.25V22.5H73.125L76.875 27.5H81.25L76.875 21.875C78.75 21.25 80 19.5 80 17.5C80 15.3 77.2 12.5 73.75 12.5H67.5ZM71.25 15H73.75C75.075 15 76.25 16.175 76.25 17.5C76.25 18.825 75.075 20 73.75 20H71.25V15Z" fill="white"/>
                        <path d="M85 12.5V27.5H95V24.375H88.75V21.25H93.75V18.125H88.75V15.625H95V12.5H85Z" fill="white"/>
                    </svg>
                    <span class="font-semibold text-xl">Comparador de Taxas</span>
                </div>
                <p>Ferramenta para Agentes Stone</p>
                <p class="text-sm text-gray-200 mt-2">© 2025 - Desenvolvido para facilitar seu dia a dia</p>
            </div>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Format inputs with Brazilian number format
            const moneyInputs = document.querySelectorAll('.money-input');
            const percentageInputs = document.querySelectorAll('.percentage-input');
            
            // Format money inputs
            moneyInputs.forEach(input => {
                input.addEventListener('input', function(e) {
                    let value = e.target.value.replace(/\D/g, '');
                    
                    if (value === '') {
                        e.target.value = '';
                        return;
                    }
                    
                    // Convert to number and format
                    const numValue = parseFloat(value) / 100;
                    e.target.value = formatCurrency(numValue).replace('R$', '').trim();
                    
                    // If it's a payment method value, update total
                    if (e.target.id === 'debitValue' || e.target.id === 'creditValue' || 
                        e.target.id === 'creditInstallmentValue' || e.target.id === 'pixValue') {
                        updateTotalAndPercentages();
                    }
                });
            });
            
            // Format percentage inputs
            percentageInputs.forEach(input => {
                input.addEventListener('input', function(e) {
                    let value = e.target.value.replace(/\D/g, '');
                    
                    if (value === '') {
                        e.target.value = '';
                        return;
                    }
                    
                    // Convert to number and format
                    const numValue = parseFloat(value) / 100;
                    e.target.value = numValue.toLocaleString('pt-BR', {
                        minimumFractionDigits: 2,
                        maximumFractionDigits: 2
                    });
                });
            });
            
            // Distribution calculation
            const totalSales = document.getElementById('totalSales');
            const debitValue = document.getElementById('debitValue');
            const creditValue = document.getElementById('creditValue');
            const creditInstallmentValue = document.getElementById('creditInstallmentValue');
            const pixValue = document.getElementById('pixValue');
            const installmentCount = document.getElementById('installmentCount');
            
            const debitPercentage = document.getElementById('debitPercentage');
            const creditPercentage = document.getElementById('creditPercentage');
            const creditInstallmentPercentage = document.getElementById('creditInstallmentPercentage');
            const pixPercentage = document.getElementById('pixPercentage');
            
            const percentageTotal = document.getElementById('percentageTotal');
            const totalValueSum = document.getElementById('totalValueSum');
            
            // Parse Brazilian formatted number to float
            function parseLocalNumber(stringNumber) {
                if (!stringNumber) return 0;
                return parseFloat(stringNumber.replace(/\./g, '').replace(',', '.'));
            }
            
            // Format as Brazilian currency
            function formatCurrency(value) {
                return new Intl.NumberFormat('pt-BR', {
                    style: 'currency',
                    currency: 'BRL'
                }).format(value);
            }
            
            // Format as Brazilian percentage
            function formatPercentage(value) {
                return value.toLocaleString('pt-BR', { 
                    minimumFractionDigits: 2, 
                    maximumFractionDigits: 2 
                }) + '%';
            }
            
            // Update total and percentages based on payment method values
            function updateTotalAndPercentages() {
                const debit = parseLocalNumber(debitValue.value) || 0;
                const credit = parseLocalNumber(creditValue.value) || 0;
                const creditInstallment = parseLocalNumber(creditInstallmentValue.value) || 0;
                const pix = parseLocalNumber(pixValue.value) || 0;
                
                const total = debit + credit + creditInstallment + pix;
                totalSales.value = formatCurrency(total).replace('R$', '').trim();
                totalValueSum.textContent = formatCurrency(total);
                
                if (total > 0) {
                    const debitPct = (debit / total) * 100;
                    const creditPct = (credit / total) * 100;
                    const creditInstallmentPct = (creditInstallment / total) * 100;
                    const pixPct = (pix / total) * 100;
                    
                    debitPercentage.textContent = formatPercentage(debitPct);
                    creditPercentage.textContent = formatPercentage(creditPct);
                    creditInstallmentPercentage.textContent = formatPercentage(creditInstallmentPct);
                    pixPercentage.textContent = formatPercentage(pixPct);
                    
                    const totalPct = debitPct + creditPct + creditInstallmentPct + pixPct;
                    percentageTotal.textContent = formatPercentage(totalPct);
                    
                    if (Math.abs(totalPct - 100) > 0.1) {
                        percentageTotal.classList.add('text-red-500', 'font-bold');
                    } else {
                        percentageTotal.classList.remove('text-red-500', 'font-bold');
                    }
                } else {
                    debitPercentage.textContent = '0%';
                    creditPercentage.textContent = '0%';
                    creditInstallmentPercentage.textContent = '0%';
                    pixPercentage.textContent = '0%';
                    percentageTotal.textContent = '0%';
                }
            }
            
            // Calculate button
            const calculateButton = document.getElementById('calculateButton');
            const resultsSection = document.getElementById('resultsSection');
            
            calculateButton.addEventListener('click', function() {
                calculateComparison();
                resultsSection.classList.remove('hidden');
                window.scrollTo({
                    top: resultsSection.offsetTop - 20,
                    behavior: 'smooth'
                });
                
                // Set date for print version
                const now = new Date();
                document.getElementById('printDate').textContent = now.toLocaleDateString('pt-BR');
                
                // Set values for print version
                document.getElementById('printTotalSales').textContent = formatCurrency(parseLocalNumber(totalSales.value));
                document.getElementById('printDebitValue').textContent = formatCurrency(parseLocalNumber(debitValue.value));
                document.getElementById('printCreditValue').textContent = formatCurrency(parseLocalNumber(creditValue.value));
                document.getElementById('printCreditInstallmentValue').textContent = 
                    formatCurrency(parseLocalNumber(creditInstallmentValue.value)) + 
                    ` (${installmentCount.value}x)`;
                document.getElementById('printPixValue').textContent = formatCurrency(parseLocalNumber(pixValue.value));
            });
            
            // Print button
            document.getElementById('printButton').addEventListener('click', function() {
                window.print();
            });
            
            // New comparison button
            document.getElementById('newComparisonButton').addEventListener('click', function() {
                resultsSection.classList.add('hidden');
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
            
            // Calculate comparison
            function calculateComparison() {
                // Get values
                const total = parseLocalNumber(totalSales.value) || 0;
                
                const debitAmount = parseLocalNumber(debitValue.value) || 0;
                const creditAmount = parseLocalNumber(creditValue.value) || 0;
                const creditInstallmentAmount = parseLocalNumber(creditInstallmentValue.value) || 0;
                const pixAmount = parseLocalNumber(pixValue.value) || 0;
                const installments = parseInt(installmentCount.value) || 2;
                
                // Stone rates
                const stoneDebitRate = parseLocalNumber(document.getElementById('stoneDebitRate').value) || 0;
                const stoneCreditRate = parseLocalNumber(document.getElementById('stoneCreditRate').value) || 0;
                const stoneCreditInstallmentRate = parseLocalNumber(document.getElementById('stoneCreditInstallmentRate').value) || 0;
                const stonePixRate = parseLocalNumber(document.getElementById('stonePixRate').value) || 0;
                const stoneBankFee = parseLocalNumber(document.getElementById('stoneBankFee').value) || 0;
                const stoneRentalFee = parseLocalNumber(document.getElementById('stoneRentalFee').value) || 0;
                const stoneIntermediationFee = parseLocalNumber(document.getElementById('stoneIntermediationFee').value) || 0;
                
                // Competitor rates
                const competitorName = document.getElementById('competitorName').value || 'Concorrente';
                const competitorDebitRate = parseLocalNumber(document.getElementById('competitorDebitRate').value) || 0;
                const competitorCreditRate = parseLocalNumber(document.getElementById('competitorCreditRate').value) || 0;
                const competitorCreditInstallmentRate = parseLocalNumber(document.getElementById('competitorCreditInstallmentRate').value) || 0;
                const competitorPixRate = parseLocalNumber(document.getElementById('competitorPixRate').value) || 0;
                const competitorBankFee = parseLocalNumber(document.getElementById('competitorBankFee').value) || 0;
                const competitorRentalFee = parseLocalNumber(document.getElementById('competitorRentalFee').value) || 0;
                const competitorIntermediationFee = parseLocalNumber(document.getElementById('competitorIntermediationFee').value) || 0;
                
                // Calculate costs - adjust for installment count
                const stoneDebitCost = debitAmount * stoneDebitRate / 100;
                const stoneCreditCost = creditAmount * stoneCreditRate / 100;
                // Adjust installment rate based on number of installments
                const adjustedStoneInstallmentRate = stoneCreditInstallmentRate * (1 + (installments - 2) * 0.1);
                const stoneCreditInstallmentCost = creditInstallmentAmount * adjustedStoneInstallmentRate / 100;
                const stonePixCost = pixAmount * stonePixRate / 100;
                const stoneFixedFees = stoneBankFee + stoneRentalFee + (total * stoneIntermediationFee / 100);
                const stoneTotalCost = stoneDebitCost + stoneCreditCost + stoneCreditInstallmentCost + stonePixCost + stoneFixedFees;
                
                const competitorDebitCost = debitAmount * competitorDebitRate / 100;
                const competitorCreditCost = creditAmount * competitorCreditRate / 100;
                // Adjust installment rate based on number of installments
                const adjustedCompetitorInstallmentRate = competitorCreditInstallmentRate * (1 + (installments - 2) * 0.1);
                const competitorCreditInstallmentCost = creditInstallmentAmount * adjustedCompetitorInstallmentRate / 100;
                const competitorPixCost = pixAmount * competitorPixRate / 100;
                const competitorFixedFees = competitorBankFee + competitorRentalFee + (total * competitorIntermediationFee / 100);
                const competitorTotalCost = competitorDebitCost + competitorCreditCost + competitorCreditInstallmentCost + competitorPixCost + competitorFixedFees;
                
                // Calculate savings
                const monthlySavings = competitorTotalCost - stoneTotalCost;
                const savingsPercentage = competitorTotalCost > 0 ? (monthlySavings / competitorTotalCost) * 100 : 0;
                const yearlySavings = monthlySavings * 12;
                
                // Update results
                document.getElementById('stoneDebitCost').textContent = formatCurrency(stoneDebitCost);
                document.getElementById('stoneCreditCost').textContent = formatCurrency(stoneCreditCost);
                document.getElementById('stoneCreditInstallmentCost').textContent = formatCurrency(stoneCreditInstallmentCost);
                document.getElementById('stonePixCost').textContent = formatCurrency(stonePixCost);
                document.getElementById('stoneFixedFees').textContent = formatCurrency(stoneFixedFees);
                document.getElementById('stoneTotalCost').textContent = formatCurrency(stoneTotalCost);
                document.getElementById('stoneCostPercentage').textContent = formatPercentage(stoneTotalCost / total * 100);
                
                document.getElementById('competitorNameDisplay').textContent = competitorName;
                document.getElementById('competitorTableHeader').textContent = competitorName;
                document.getElementById('competitorDebitCost').textContent = formatCurrency(competitorDebitCost);
                document.getElementById('competitorCreditCost').textContent = formatCurrency(competitorCreditCost);
                document.getElementById('competitorCreditInstallmentCost').textContent = formatCurrency(competitorCreditInstallmentCost);
                document.getElementById('competitorPixCost').textContent = formatCurrency(competitorPixCost);
                document.getElementById('competitorFixedFees').textContent = formatCurrency(competitorFixedFees);
                document.getElementById('competitorTotalCost').textContent = formatCurrency(competitorTotalCost);
                document.getElementById('competitorCostPercentage').textContent = formatPercentage(competitorTotalCost / total * 100);
                
                document.getElementById('monthlySavings').textContent = formatCurrency(monthlySavings);
                document.getElementById('savingsPercentage').textContent = `${formatPercentage(savingsPercentage)} de economia`;
                document.getElementById('yearlySavings').textContent = formatCurrency(yearlySavings);
                
                // Update savings bar
                const savingsBar = document.getElementById('savingsBar');
                const barWidth = Math.min(Math.max(savingsPercentage, 0), 100);
                savingsBar.style.width = `${barWidth}%`;
                
                // Fill details table
                const detailsTable = document.getElementById('detailsTable');
                detailsTable.innerHTML = '';
                
                // Add rows to details table
                addTableRow(detailsTable, 'Taxa de Débito', stoneDebitCost, competitorDebitCost);
                addTableRow(detailsTable, 'Taxa de Crédito à Vista', stoneCreditCost, competitorCreditCost);
                addTableRow(detailsTable, `Taxa de Crédito Parcelado (${installments}x)`, stoneCreditInstallmentCost, competitorCreditInstallmentCost);
                addTableRow(detailsTable, 'Taxa de Pix', stonePixCost, competitorPixCost);
                addTableRow(detailsTable, 'Cesta Bancária', stoneBankFee, competitorBankFee);
                addTableRow(detailsTable, 'Aluguel de Maquininha', stoneRentalFee, competitorRentalFee);
                addTableRow(detailsTable, 'Taxa de Intermediação', total * stoneIntermediationFee / 100, total * competitorIntermediationFee / 100);
                addTableRow(detailsTable, 'Total', stoneTotalCost, competitorTotalCost, true);
            }
            
            // Add row to details table
            function addTableRow(table, label, stoneValue, competitorValue, isTotal = false) {
                const difference = competitorValue - stoneValue;
                const row = document.createElement('tr');
                
                if (isTotal) {
                    row.classList.add('bg-gray-50', 'font-bold');
                }
                
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${label}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-right ${isTotal ? 'stone-green-text' : 'text-gray-900'}">${formatCurrency(stoneValue)}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-right ${isTotal ? 'competitor-color-text' : 'text-gray-900'}">${formatCurrency(competitorValue)}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-right ${difference > 0 ? 'text-green-600' : difference < 0 ? 'text-red-600' : 'text-gray-900'}">${formatCurrency(difference)}</td>
                `;
                
                table.appendChild(row);
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9648108b33ca6db3',t:'MTc1MzQwODgzNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>